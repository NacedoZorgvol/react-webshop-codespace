{"ast":null,"code":"var _jsxFileName = \"/workspaces/react-webshop-codespace/frontend/src/context/CartContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nconst initial = {\n  items: JSON.parse(localStorage.getItem('cart')) || []\n};\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'ADD':\n      {\n        const exists = state.items.find(i => i.id === action.item.id);\n        let items;\n        if (exists) {\n          items = state.items.map(i => i.id === action.item.id ? {\n            ...i,\n            qty: i.qty + action.qty\n          } : i);\n        } else {\n          items = [...state.items, {\n            ...action.item,\n            qty: action.qty\n          }];\n        }\n        return {\n          ...state,\n          items\n        };\n      }\n    case 'REMOVE':\n      {\n        return {\n          ...state,\n          items: state.items.filter(i => i.id !== action.id)\n        };\n      }\n    case 'UPDATE_QTY':\n      {\n        return {\n          ...state,\n          items: state.items.map(i => i.id === action.id ? {\n            ...i,\n            qty: action.qty\n          } : i)\n        };\n      }\n    case 'CLEAR':\n      return {\n        ...state,\n        items: []\n      };\n    default:\n      return state;\n  }\n}\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [state, dispatch] = useReducer(reducer, initial);\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(state.items));\n  }, [state.items]);\n  const add = (item, qty = 1) => dispatch({\n    type: 'ADD',\n    item,\n    qty\n  });\n  const remove = id => dispatch({\n    type: 'REMOVE',\n    id\n  });\n  const updateQty = (id, qty) => dispatch({\n    type: 'UPDATE_QTY',\n    id,\n    qty\n  });\n  const clear = () => dispatch({\n    type: 'CLEAR'\n  });\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      items: state.items,\n      add,\n      remove,\n      updateQty,\n      clear\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProvider, \"q+MzXaS5K5D+09en5v35HqexUBA=\");\n_c = CartProvider;\nexport function useCart() {\n  _s2();\n  return useContext(CartContext);\n}\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","jsxDEV","_jsxDEV","CartContext","initial","items","JSON","parse","localStorage","getItem","reducer","state","action","type","exists","find","i","id","item","map","qty","filter","CartProvider","children","_s","dispatch","setItem","stringify","add","remove","updateQty","clear","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["/workspaces/react-webshop-codespace/frontend/src/context/CartContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\n\nconst CartContext = createContext();\n\nconst initial = {\n  items: JSON.parse(localStorage.getItem('cart')) || []\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'ADD': {\n      const exists = state.items.find(i => i.id === action.item.id);\n      let items;\n      if (exists) {\n        items = state.items.map(i =>\n          i.id === action.item.id ? { ...i, qty: i.qty + action.qty } : i\n        );\n      } else {\n        items = [...state.items, { ...action.item, qty: action.qty }];\n      }\n      return { ...state, items };\n    }\n    case 'REMOVE': {\n      return { ...state, items: state.items.filter(i => i.id !== action.id) };\n    }\n    case 'UPDATE_QTY': {\n      return { ...state, items: state.items.map(i => i.id === action.id ? { ...i, qty: action.qty } : i) };\n    }\n    case 'CLEAR':\n      return { ...state, items: [] };\n    default:\n      return state;\n  }\n}\n\nexport function CartProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initial);\n\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(state.items));\n  }, [state.items]);\n\n  const add = (item, qty = 1) => dispatch({ type: 'ADD', item, qty });\n  const remove = id => dispatch({ type: 'REMOVE', id });\n  const updateQty = (id, qty) => dispatch({ type: 'UPDATE_QTY', id, qty });\n  const clear = () => dispatch({ type: 'CLEAR' });\n\n  return (\n    <CartContext.Provider value={{ items: state.items, add, remove, updateQty, clear }}>\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  return useContext(CartContext);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}